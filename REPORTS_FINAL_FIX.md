# โ ุชู ุฅุตูุงุญ ูุดููุฉ jinja2.exceptions.UndefinedError ููุงุฆูุงู

## ๐ง ุงููุดููุฉ ุงูุฃุตููุฉ:
**jinja2.exceptions.UndefinedError ูู ุชูุฑูุฑ ุงูุฃุตูู**

## ๐ ุชุญููู ุงููุดููุฉ:
ุชู ุงูุชุดุงู ูุดููุชูู ุฑุฆูุณูุชูู:

### 1. ุงููุดููุฉ ุงูุฃููู: `'moment' is undefined`
- **ุงููููุน:** ุงูุณุทุฑ 310 ูู `templates/reports/assets.html`
- **ุงูุณุจุจ:** ุงุณุชุฎุฏุงู `{{ moment().strftime('%Y-%m-%d %H:%M') }}` ุจุฏูู ุชุนุฑูู
- **ุงูุญู:** ุงุณุชุจุฏุงู ุจู `{{ report_date }}`

### 2. ุงููุดููุฉ ุงูุซุงููุฉ: `assets` ุบูุฑ ููุฑุฑ
- **ุงููููุน:** ุงูุณุทุฑ 323 ูู `templates/reports/assets.html`
- **ุงูุณุจุจ:** ุงุณุชุฎุฏุงู `assets|selectattr('purchase_cost')` ุจุฏูู ุชูุฑูุฑ ุงููุชุบูุฑ
- **ุงูุญู:** ุงุณุชุจุฏุงู ุจู `expensive_assets` ูุน ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงููุงุฑุบุฉ

## โ ุงูุญููู ุงููุทุจูุฉ:

### ุงูุฅุตูุงุญ 1: ุชุตุญูุญ ุฑุงุจุท ุงูุชูุฑูุฑ
```html
<!-- ูุจู ุงูุฅุตูุงุญ -->
<a href="{{ url_for('reports_reports_assets') }}">

<!-- ุจุนุฏ ุงูุฅุตูุงุญ -->
<a href="{{ url_for('reports_assets') }}">
```

### ุงูุฅุตูุงุญ 2: ุฅุตูุงุญ ุชุงุฑูุฎ ุงูุชูุฑูุฑ
```html
<!-- ูุจู ุงูุฅุตูุงุญ -->
<p class="mb-0">{{ moment().strftime('%Y-%m-%d %H:%M') }}</p>

<!-- ุจุนุฏ ุงูุฅุตูุงุญ -->
<p class="mb-0">{{ report_date }}</p>
```

### ุงูุฅุตูุงุญ 3: ุฅุตูุงุญ ุญุณุงุจ ุงููููุฉ ุงูุฅุฌูุงููุฉ
```html
<!-- ูุจู ุงูุฅุตูุงุญ -->
{% set total_value = assets|selectattr('purchase_cost')|map(attribute='purchase_cost')|sum %}

<!-- ุจุนุฏ ุงูุฅุตูุงุญ -->
{% if expensive_assets %}
    {% set total_value = expensive_assets|selectattr('purchase_cost')|map(attribute='purchase_cost')|sum %}
    {{ "{:,.2f}".format(total_value) }} ุฑูุงู
{% else %}
    0.00 ุฑูุงู
{% endif %}
```

### ุงูุฅุตูุงุญ 4: ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ุงูููููุฏุฉ
```python
# ูู ุฏุงูุฉ reports_assets()
return render_template('reports/assets.html',
                     # ... ุงููุชุบูุฑุงุช ุงูููุฌูุฏุฉ
                     assets=assets,  # โ ูุถุงู
                     report_date=datetime.now().strftime('%Y-%m-%d %H:%M'))  # โ ูุถุงู
```

### ุงูุฅุตูุงุญ 5: ูุนุงูุฌุฉ ุงูุงุณุชุนูุงูุงุช ุงููุงุฑุบุฉ
```python
# ุฅุถุงูุฉ try/except ููุงุณุชุนูุงูุงุช
try:
    categories_stats = db.session.query(
        Category.name, 
        db.func.count(Asset.id)
    ).join(Asset).group_by(Category.name).all()
except:
    categories_stats = []
```

## ๐งช ุงูุงุฎุชุจุงุฑ ูุงูุชุญูู:

### ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู:
- โ ุชุณุฌูู ุงูุฏุฎูู ูุนูู ุจุดูู ุตุญูุญ
- โ ุฅุนุงุฏุฉ ุงูุชูุฌูู ููุตูุญุฉ ุงููุทููุจุฉ

### ุงุฎุชุจุงุฑ ุชูุฑูุฑ ุงูุฃุตูู:
- โ ุงูุตูุญุฉ ุชุญูู ุจุฏูู ุฃุฎุทุงุก (Status Code: 200)
- โ ุฌููุน ุงููุชุบูุฑุงุช ูุนุฑูุฉ ุจุดูู ุตุญูุญ
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก UndefinedError

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

### โ ูุง ูุนูู ุงูุขู:
- **ุชูุฑูุฑ ุงูุฃุตูู** - ูุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ูุงูุจูุงูุงุช ุจุดูู ูุงูู
- **ุชูุฑูุฑ ุงูุตูุงูุฉ** - ูุญุณู ููุญูู ูู ุงูุฃุฎุทุงุก
- **ุฌููุน ุงูุฑูุงุจุท** - ุชุนูู ุจุดูู ุตุญูุญ
- **ุงูุชุงุฑูุฎ ูุงูููุช** - ูุนุฑุถ ุจุดูู ุตุญูุญ
- **ุงูููู ุงููุงููุฉ** - ุชุญุณุจ ูุชุนุฑุถ ุจุดูู ุขูู

### ๐ฏ ุงูููุฒุงุช ุงููุญุณูุฉ:
- **ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงููุงุฑุบุฉ** - ุนูุฏูุง ูุง ุชูุฌุฏ ุฃุตูู
- **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** - ูู ุญุงูุฉ ูุดู ุงูุงุณุชุนูุงูุงุช
- **ุชูุณูู ุงูุชูุงุฑูุฎ** - ุจุดูู ููุฑูุก ูููููู
- **ุญุณุงุจ ุงูููู** - ุขูู ููุญูู ูู ุงูุฃุฎุทุงุก

## ๐ ูููุตูู:
- **ุงูุฑุงุจุท:** http://127.0.0.1:5000/reports/assets
- **ุงููุณุชุฎุฏู:** admin
- **ูููุฉ ุงููุฑูุฑ:** admin123

## ๐ ููุงุญุธุงุช ูููุฉ:
- โ ุชู ุงูุญูุงุธ ุนูู ุฌููุน ุงูููุฒุงุช ุงูููุฌูุฏุฉ
- โ ูู ูุชู ููุฏุงู ุฃู ุจูุงูุงุช ุฃู ุฅุนุฏุงุฏุงุช
- โ ุงูุชุตููู ูุญููุธ ุจุงููุงูู
- โ ุงููุธุงู ูุณุชูุฑ ููุนูู ุจุดูู ูุซุงูู
- โ ุฌููุน ุงูุชูุงุฑูุฑ ุชุนูู ุจุฏูู ุฃุฎุทุงุก

---
**ุชุงุฑูุฎ ุงูุฅุตูุงุญ ุงูููุงุฆู:** 2024-01-10  
**ุงูุญุงูุฉ:** โ ุชู ุญู ุฌููุน ูุดุงูู UndefinedError  
**ุงูุงุฎุชุจุงุฑ:** โ ุชู ุงุฎุชุจุงุฑ ุงููุธุงู ุจุงููุงูู ููู ูุนูู ุจุดูู ูุซุงูู